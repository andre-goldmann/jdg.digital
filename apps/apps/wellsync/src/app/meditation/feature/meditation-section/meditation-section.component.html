<div class="meditation-section-container">
  <!-- Navigation Header -->
  <app-nav-bar></app-nav-bar>

  <!-- Main Content -->
  <div class="content">
    <!-- Meditation Header -->
    <div class="section-header">
      <h1>Your Meditation Practice</h1>
      <div class="stats-summary">
        <div class="stat-item">
          <span class="stat-value">{{
            meditationStore.completedSessions()
          }}</span>
          <span class="stat-label">Completed</span>
        </div>
        <div class="stat-item">
          <span class="stat-value">{{ meditationStore.totalMinutes() }}</span>
          <span class="stat-label">Total Minutes</span>
        </div>
        <div class="stat-item">
          <span class="stat-value">{{ meditationStore.dayStreak() }}</span>
          <span class="stat-label">Day Streak</span>
        </div>
      </div>
    </div>

    <!-- Reflection Card -->
    <div class="reflection-section">
      <mat-card class="reflection-card">
        <mat-card-content>
          <div class="reflection-content">
            <div>
              <h2>Daily Reflection</h2>
              <p>Take a moment to reflect on your mindfulness journey today</p>
            </div>
            <button
              mat-raised-button
              color="accent"
              (click)="startReflection()"
            >
              Begin Reflection
            </button>
          </div>
        </mat-card-content>
      </mat-card>
    </div>

    <!-- Meditation Sessions -->
    <div class="sessions-list">
      <h2>Meditation Sessions</h2>
      @if (meditationStore.loading()) {
      <div class="loading">Loading sessions...</div>
      } @else if (meditationStore.sessionsEntities().length === 0) {
      <div class="empty-state">
        <mat-icon>psychology</mat-icon>
        <p>No meditation sessions available. Check back later!</p>
      </div>
      } @else { @for (session of meditationStore.sessionsEntities(); track
      session.id) {
      <mat-card class="session-card">
        <mat-card-content>
          <div class="session-content">
            <div class="session-info">
              <div class="session-header">
                <h3>{{ session.name }}</h3>
                <mat-chip [class]="getMeditationTypeClass(session.type)">
                  {{ session.type }}
                </mat-chip>
              </div>
              <p class="session-description">{{ session.description }}</p>
              <div class="session-meta">
                <span class="duration">
                  <mat-icon>timer</mat-icon> {{ session.duration }}
                </span>
              </div>
              @if (session.progress > 0) {
              <div class="progress-container">
                <div class="progress-label">
                  Progress: {{ session.progress }}%
                </div>
                <mat-progress-bar
                  mode="determinate"
                  [value]="session.progress"
                ></mat-progress-bar>
              </div>
              }
            </div>
            <div class="session-actions">
              <button
                mat-raised-button
                [color]="session.completed ? 'accent' : 'primary'"
                [disabled]="session.completed"
                (click)="beginSession(session.id)"
              >
                <mat-icon>{{
                  session.completed ? 'check' : 'play_arrow'
                }}</mat-icon>
                {{ session.completed ? 'Completed' : 'Begin' }}
              </button>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
      } }
    </div>
  </div>
</div>
